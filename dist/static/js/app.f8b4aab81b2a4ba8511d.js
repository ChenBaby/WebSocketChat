webpackJsonp([1],{NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},a,!1,function(e){n("gsu9")},null,null).exports,o=n("/ocq"),c=n("mvHQ"),r=n.n(c),u={name:"HelloWorld",data:function(){return{msg:"当前聊天室人数：",name:"",id:"",message:"",comeined:!1,ws:null,totalNum:0,messagesList:""}},directives:{focus:{componentUpdated:function(e,t){t.value&&e.querySelector("input").focus()}}},methods:{beforeunloadHandler:function(e){var t={name:this.name,id:this.id,type:"5"};this.ws.close(t)},enterRoom:function(){this.name&&this.initWebSocket()},leaveRoom:function(){var e={name:this.name,id:this.id,type:"4"};this.ws.send(r()(e))},sendContent:function(){if(!this.message)return!1;var e={name:this.name,id:this.id,message:this.message,type:"3"};this.ws.send(r()(e)),this.message=""},initWebSocket:function(){var e=this,t=this;t.ws=new WebSocket("ws://35.200.61.173:6060/");var n=t.ws;n.onopen=function(){console.log("进入连接");var e={name:t.name,type:"2"};n.send(r()(e))},n.onmessage=function(n){var s=JSON.parse(n.data);switch(console.log(s),e.totalNum=s.num,s.type){case"1":e.id=s.id;break;case"2":var a=s.name+"进入聊天室\n";t.messagesList+=a,t.comeined=!0;break;case"3":var i=s.name+"说："+s.message+"\n";e.messagesList+=i;break;case"4":var o=s.name+"离开聊天室\n";e.messagesList+=o,s.id===e.id&&(t.comeined=!1);break;case"5":var c=s.name+"离开聊天室\n";e.messagesList+=c;break;default:e.messagesList+="服务器连接错误，请重试\n"}}}},mounted:function(){},destroyed:function(){}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"hello"},[n("h1",[e._v(e._s(e.msg)+e._s(e.totalNum))]),e._v(" "),n("p",{staticClass:"checking-panel"},[n("el-input",{staticClass:"chat-name",attrs:{type:"text",placeholder:"请输入名字",autofocus:!0,readonly:e.comeined},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.enterRoom(t):null}},model:{value:e.name,callback:function(t){e.name="string"==typeof t?t.trim():t},expression:"name"}}),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:!e.comeined,expression:"!comeined"}],on:{click:e.enterRoom}},[e._v("进入聊天室")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:e.comeined,expression:"comeined"}],on:{click:e.leaveRoom}},[e._v("离开聊天室")])],1),e._v(" "),n("div",[n("p",{staticClass:"text-left"},[e._v("聊天室")]),e._v(" "),n("el-input",{attrs:{name:"chatting-box",id:"chatting-panel",readonly:!0,type:"textarea",autosize:{minRows:18,maxRows:18}},model:{value:e.messagesList,callback:function(t){e.messagesList=t},expression:"messagesList"}}),e._v(" "),n("p",{staticClass:"text-center"},[n("el-input",{directives:[{name:"focus",rawName:"v-focus",value:e.comeined,expression:"comeined"}],staticClass:"chat-content",attrs:{type:"text"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.sendContent(t):null}},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),n("el-button",{on:{click:e.sendContent}},[e._v("发送")])],1)],1)])},staticRenderFns:[]};var m=n("VU/8")(u,l,!1,function(e){n("Oa81")},"data-v-7f4e28cd",null).exports;s.default.use(o.a);var d=new o.a({routes:[{path:"/",name:"HelloWorld",component:m}]}),v=n("zL8q"),p=n.n(v);n("tvR6");s.default.use(p.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:d,components:{App:i},template:"<App/>"})},Oa81:function(e,t){},gsu9:function(e,t){},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.f8b4aab81b2a4ba8511d.js.map